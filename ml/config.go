package ml

import (
	"encoding/json"
	"log"
	"os"
	"path/filepath"
	"strings"
	"time"
)

type CollectionsConfig struct {
	Collections []*Collection
	LastUpdated time.Time
}

var CollsConfig *CollectionsConfig

func LoadConfig() {
	dir := filepath.Dir(os.Args[0])
	buf, err := os.ReadFile(filepath.Join(dir, "collections.json"))
	if err != nil || strings.TrimSpace(string(buf)) == "" {
		return
	}
	err = json.Unmarshal(buf, &CollsConfig)
	if err != nil {
		log.Println("Error loading collections config:", err)
	}
}

func SaveConfig() {
	dir := filepath.Dir(os.Args[0])
	buf, err := json.Marshal(CollsConfig)
	if err == nil {
		err = os.WriteFile(filepath.Join(dir, "collections.json"), buf, 0666)
	}
	if err != nil {
		log.Println("Error saving collections config:", err)
	}
}

var defcolls = []*Collection{
	{"Наши друзья", "Семейные фильмы про животных", "Фильмы про кошек, собак и других животных друзей людей, начиная с 1990 года и жанрами комедия, семейный фильм", ""},
	{"Космическая одиссея", "Классика фантастики о покорении космоса", "Научно-фантастические фильмы про освоение космоса до 2000 года", ""},
	{"Вселенная Нолана", "Хронология фильмов культового режиссера", "Фильмы Кристофера Нолана в хронологическом порядке", ""},
	{"Ностальгические 90-е", "Знаковые подростковые комедии эпохи", "Популярные подростковые комедии 1995-1999 годов", ""},
	{"Винтажные ужасы", "Культовые хорроры с практическими эффектами", "Культовые фильмы ужасов 1970-1980 годов с практическими эффектами", ""},
	{"Киберпанк будущего", "Цифровые антиутопии о технологиях", "Футуристичные антиутопии про хакеров и искусственный интеллект 2010-2023 годов", ""},
	{"Мистика старых замков", "Жуткие истории в готических интерьерах", "Фильмы ужасов и триллеры, действие которых происходит в старых замках и таинственных особняках", ""},
	{"Эпические сражения", "Грандиозные баталии в истории и фэнтези", "Исторические фильмы и фэнтези с масштабными битвами и военными кампаниями", ""},
	{"Герои в масках", "Эволюция супергеройского жанра", "Фильмы о супергероях, спасающих мир, от классики до современных блокбастеров", ""},
	{"Загадки космоса", "Тайны Вселенной в документальном кино", "Документальные и научно-популярные фильмы о тайнах Вселенной, чёрных дырах и внеземной жизни", ""},
	{"Кулинарное путешествие", "Гастрономические истории для гурманов", "Фильмы, посвящённые еде, кулинарии и ресторанному бизнесу, вдохновляющие на гастрономические приключения", ""},
	{"Режиссёрский дебют", "Первые шаги великих кинематографистов", "Первые полнометражные фильмы известных режиссёров, раскрывающие их уникальный стиль", ""},
	{"Сны наяву", "Сюрреалистические исследования сознания", "Сюрреалистические и артхаусные фильмы, исследующие границы реальности и сновидений", ""},
	{"Один актёр, много лиц", "Трансформации и многогранность талантов", "Фильмы, где один актёр исполняет несколько ролей или сильно меняется на протяжении карьеры", ""},
	{"Кино, изменившее мир", "Фильмы-революционеры в истории кино", "Фильмы, оказавшие значительное влияние на культуру, общество или кинематограф", ""},
	{"Уютные вечера", "Тёплые фильмы для семейного просмотра", "Добрые и светлые фильмы для семейного просмотра или отдыха после долгого дня", ""},
	{"Вдохновляющие истории", "Подлинные истории преодоления", "Фильмы, основанные на реальных событиях, о людях, которые преодолели трудности и достигли успеха", ""},
	{"Приключения для всей семьи", "Захватывающие истории для всех возрастов", "Приключенческие фильмы и мультфильмы, которые понравятся как детям, так и взрослым", ""},
	{"Детективы старой школы", "Классические расследования с харизматичными сыщиками", "Классические детективные фильмы до 1970 года с харизматичными сыщиками и непредсказуемыми развязками", ""},
	{"Безумные учёные", "Гениальные изобретатели и их эксперименты", "Фильмы про гениальных, но эксцентричных учёных и их изобретения, приведшие к неожиданным последствиям", ""},
	{"Спорт в кино", "Драмы и комедии о спортивных достижениях", "Драмы и комедии о спорте, победах, поражениях и силе духа спортсменов", ""},
	{"Городские легенды", "Ужасы, основанные на современных мифах", "Фильмы ужасов и триллеры, основанные на популярных городских легендах и мифах", ""},
	{"Музыкальные биопики", "Жизнь великих музыкантов на экране", "Биографические фильмы о жизни и творчестве известных музыкантов и исполнителей", ""},
	{"Постапокалиптический мир", "Борьба за выживание после катастрофы", "Фильмы о жизни после глобальной катастрофы, выживании и новом обществе", ""},
	{"Мир дикой природы", "Документальные путешествия по заповедным местам", "Документальные фильмы о флоре и фауне нашей планеты, красоте и суровости дикой природы", ""},
	{"Французская новая волна", "Авангардные фильмы, изменившие кино", "Знаковые фильмы французской Новой волны, изменившие представление о кинематографе", ""},
	{"Психологические триллеры", "Исследование тёмных уголков разума", "Фильмы с напряжённым сюжетом, исследующие тёмные стороны человеческой психики", ""},
	{"Путешествия во времени", "Парадоксы и альтернативные реальности", "Фильмы, где герои перемещаются в прошлое или будущее, меняя ход истории", ""},
	{"Искусственный интеллект", "Фильмы о будущем разумных машин", "Фильмы о разумных машинах, их развитии и взаимодействии с человечеством", ""},
	{"Битвы роботов", "Фантастические сражения механических гигантов", "Фантастические фильмы про гигантских роботов и их сражения", ""},
	{"Экранизации Шекспира", "Вечная классика в кинематографе", "Фильмы, основанные на произведениях Уильяма Шекспира, от классических до современных адаптаций", ""},
	{"Культовые комедии 80-х", "Легендарный юмор эпохи диско", "Легендарные комедии 1980-х годов, которые до сих пор смешат зрителей", ""},
	{"Неизвестные планеты", "Фантастические миры и инопланетные цивилизации", "Фантастические фильмы о приключениях на далёких инопланетных мирах", ""},
	{"Фильмы о хакерах", "Кибертриллеры о цифровой эпохе", "Технотриллеры и драмы о взломах, киберпреступности и цифровом мире", ""},
	{"Закулисье Голливуда", "Тайны кинематографической индустрии", "Фильмы, рассказывающие о создании кино, жизни актёров и режиссёров", ""},
	{"Выживание в экстремальных условиях", "Борьба человека со стихией", "Фильмы о людях, столкнувшихся с природными катаклизмами и борющихся за жизнь", ""},
	{"Вампиры и оборотни", "Вечная борьба мистических существ", "Фильмы о мистических существах, их противостоянии и историях любви", ""},
	{"Фильмы-катастрофы", "Масштабные бедствия и человеческий героизм", "Эпические фильмы о природных и техногенных катастрофах и героизме людей", ""},
	{"Мистические детективы", "Расследования с элементами сверхъестественного", "Детективы с элементами мистики, где разгадка кроется в сверхъестественном", ""},
	{"Антиутопии будущего", "Мрачные картины тоталитарного завтра", "Фильмы, изображающие мрачное будущее человечества под тоталитарным контролем", ""},
	{"Фильмы про тюрьмы", "Драмы о жизни за решёткой и побегах", "Драмы и триллеры о жизни в заключении, побегах и борьбе за свободу", ""},
	{"Магия и волшебство", "Фэнтези о чародеях и волшебных мирах", "Фэнтези фильмы о чародеях, магических мирах и приключениях", ""},
	{"Психологические драмы", "Глубокие исследования человеческих отношений", "Глубокие фильмы, исследующие человеческие отношения, эмоции и конфликты", ""},
	{"Путешествия по миру", "Приключения в экзотических локациях", "Приключенческие фильмы, действие которых происходит в экзотических странах и неизведанных местах", ""},
	{"Классические нуары", "Чёрно-белые детективы с роковыми женщинами", "Черно-белые фильмы-нуар, с роковыми женщинами, циничными детективами и мрачной атмосферой", ""},
	{"Фильмы про мафию", "Гангстерские саги о власти и предательстве", "Гангстерские саги о криминальном мире, власти и предательстве", ""},
	{"Экранизации комиксов", "Киноадаптации графических романов", "Фильмы, основанные на популярных комиксах, не относящиеся к супергероике", ""},
	{"Азиатские боевики", "Энергичные единоборства и динамичные сюжеты", "Динамичные боевики из Азии с захватывающими единоборствами и оригинальными сюжетами", ""},
	{"Военные драмы", "Фильмы о цене войны и человеческих судьбах", "Фильмы о войне, её последствиях и человеческих судьбах", ""},
	{"Биографии великих", "Жизнеописания выдающихся исторических фигур", "Биографические фильмы о выдающихся личностях в истории, науке и искусстве", ""},
}
